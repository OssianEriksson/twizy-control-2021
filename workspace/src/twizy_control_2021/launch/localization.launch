<?xml version="1.0"?>
<launch>
    <include file="$(find twizy_control_2021)/launch/static_transforms.launch" />

    <node name="gnss_pose" pkg="twizy_localization" type="gnss_pose" required="true">
        <remap from="pose" to="/gnss/pose" />
        
        <rosparam param="inputs">[/gnss/left/fix, /gnss/right/fix]</rosparam>
        <param name="center_link" value="base_link" />
        <param name="differential" type="bool" value="true" />
        <param name="frequency" value="10" />
    </node>

    <node name="ekf_localization_node" pkg="robot_localization" type="ekf_localization_node" required="true">
        <param name="map_frame" value="map" />
        <param name="odom_frame" value="odom" />
        <param name="base_link_frame" value="base_link" />
        <param name="world_frame" value="map" />

        <param name="frequency" value="10" />
        
        <param name="pose0" value="/gnss/pose" />
        <rosparam param="pose0_config">[true,  true,  true,
                                        true,  true,  true,
                                        false, false, false,
                                        false, false, false,
                                        false, false, false]</rosparam>
    </node>
</launch>