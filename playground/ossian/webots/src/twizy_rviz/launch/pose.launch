<launch>
    <arg name="rvizconfig" default="$(find twizy_rviz)/rviz/odom.rviz" />
    <arg name="model" default="$(find twizy_rviz)/urdf/twizy.urdf"/>

    <param name="robot_description" textfile="$(arg model)" />

    <node name="rviz" pkg="rviz" type="rviz" args="-d $(arg rvizconfig)" />

    <node name="twizy_pose" pkg="twizy_rviz" type="pose" />

    <!-- <rosparam param="source_list">[/twizy_states]</rosparam> -->
    <!-- <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" /> -->

    <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" />

    <node name="ekf_localization_node" pkg="robot_localization" type="ekf_localization_node">
        <param name="map_frame" value="map" />
        <param name="odom_frame" value="odom" />
        <param name="base_link_frame" value="base_link" />
        <param name="world_frame" value="odom" />

        <param name="pose0" value="gnss/pose" />
        <param name="pose0_relative" value="true" />
        <rosparam param="pose0_config">[true, true, true,
                                        true, true, true,
                                        true, true, true,
                                        true, true, true,
                                        true, true, true]</rosparam>


        <param name="frequency" value="10" />
    </node>
</launch>